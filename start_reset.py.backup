from telegram import Update
from telegram.ext import ContextTypes
from conversation_handler import QUESTIONS

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data.clear()
    context.user_data["step"] = 0
    await update.message.reply_text(
        "ðŸ‘‹ OlÃ¡, sou seu Contabilista Virtual! Selecione no menu ao lado o que vocÃª precisa:\n"
        "/start â€“ Iniciar questionÃ¡rio IRS\n"
        "/ajuda â€“ Ver instruÃ§Ãµes\n"
        "/reset â€“ Reiniciar fluxo"
    )
    await update.message.reply_text(QUESTIONS[0])

async def ajuda(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "/start â€“ iniciar questionÃ¡rio IRS\n"
        "/ajuda â€“ ver instruÃ§Ãµes\n"
        "/reset â€“ reiniciar fluxo"
    )

async def reset(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data.clear()
    context.user_data["step"] = 0
    await update.message.reply_text("ðŸ”„ Fluxo reiniciado.")
    await update.message.reply_text(QUESTIONS[0])

